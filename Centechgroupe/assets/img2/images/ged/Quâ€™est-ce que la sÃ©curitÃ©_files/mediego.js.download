!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t,n){(function(t,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.4+314e4831
 */var i;i=function(){"use strict";function e(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,r=void 0,s=void 0,a=function(e,t){h[o]=e,h[o+1]=t,2===(o+=2)&&(s?s(m):b())};var u="undefined"!=typeof window?window:void 0,c=u||{},l=c.MutationObserver||c.WebKitMutationObserver,p="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(m,1)}}var h=new Array(1e3);function m(){for(var e=0;e<o;e+=2){(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0}o=0}var g,v,y,_,b=void 0;function w(e,t){var n=this,i=new this.constructor(C);void 0===i[k]&&F(i);var o=n._state;if(o){var r=arguments[o-1];a(function(){return N(o,i,r,n._result)})}else q(n,i,e,t);return i}function x(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(C);return j(t,e),t}p?b=function(){return t.nextTick(m)}:l?(v=0,y=new l(m),_=document.createTextNode(""),y.observe(_,{characterData:!0}),b=function(){_.data=v=++v%2}):d?((g=new MessageChannel).port1.onmessage=m,b=function(){return g.port2.postMessage(0)}):b=void 0===u?function(){try{var e=Function("return this")().require("vertx");return void 0!==(r=e.runOnLoop||e.runOnContext)?function(){r(m)}:f()}catch(e){return f()}}():f();var k=Math.random().toString(36).substring(2);function C(){}var T=void 0,S=1,A=2,O={error:null};function P(e){try{return e.then}catch(e){return O.error=e,O}}function I(t,n,i){n.constructor===t.constructor&&i===w&&n.constructor.resolve===x?function(e,t){t._state===S?M(e,t._result):t._state===A?E(e,t._result):q(t,void 0,function(t){return j(e,t)},function(t){return E(e,t)})}(t,n):i===O?(E(t,O.error),O.error=null):void 0===i?M(t,n):e(i)?function(e,t,n){a(function(e){var i=!1,o=function(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}(n,t,function(n){i||(i=!0,t!==n?j(e,n):M(e,n))},function(t){i||(i=!0,E(e,t))},e._label);!i&&o&&(i=!0,E(e,o))},e)}(t,n,i):M(t,n)}function j(e,t){var n,i;e===t?E(e,new TypeError("You cannot resolve a promise with itself")):(i=typeof(n=t),null===n||"object"!==i&&"function"!==i?M(e,t):I(e,t,P(t)))}function D(e){e._onerror&&e._onerror(e._result),L(e)}function M(e,t){e._state===T&&(e._result=t,e._state=S,0!==e._Envoyerrs.length&&a(L,e))}function E(e,t){e._state===T&&(e._state=A,e._result=t,a(D,e))}function q(e,t,n,i){var o=e._Envoyerrs,r=o.length;e._onerror=null,o[r]=t,o[r+S]=n,o[r+A]=i,0===r&&e._state&&a(L,e)}function L(e){var t=e._Envoyerrs,n=e._state;if(0!==t.length){for(var i=void 0,o=void 0,r=e._result,s=0;s<t.length;s+=3)i=t[s],o=t[s+n],i?N(n,i,o,r):o(r);e._Envoyerrs.length=0}}function N(t,n,i,o){var r=e(i),s=void 0,a=void 0,u=void 0,c=void 0;if(r){if((s=function(e,t){try{return e(t)}catch(e){return O.error=e,O}}(i,o))===O?(c=!0,a=s.error,s.error=null):u=!0,n===s)return void E(n,new TypeError("A promises callback cannot return that same promise."))}else s=o,u=!0;n._state!==T||(r&&u?j(n,s):c?E(n,a):t===S?M(n,s):t===A&&E(n,s))}var B=0;function F(e){e[k]=B++,e._state=void 0,e._result=void 0,e._Envoyerrs=[]}var K=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(C),this.promise[k]||F(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&M(this.promise,this._result))):E(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===T&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===x){var o=P(e);if(o===w&&e._state!==T)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===H){var r=new n(C);I(r,e,o),this._willSettleAt(r,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},e.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===T&&(this._remaining--,e===A?E(i,n):this._result[t]=n),0===this._remaining&&M(i,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;q(e,void 0,function(e){return n._settledAt(S,t,e)},function(e){return n._settledAt(A,t,e)})},e}();var H=function(){function e(t){this[k]=B++,this._result=this._state=void 0,this._Envoyerrs=[],C!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){j(e,t)},function(t){E(e,t)})}catch(t){E(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},e}();return H.prototype.then=w,H.all=function(e){return new K(this,e).promise},H.race=function(e){var t=this;return i(e)?new t(function(n,i){for(var o=e.length,r=0;r<o;r++)t.resolve(e[r]).then(n,i)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},H.resolve=x,H.reject=function(e){var t=new this(C);return E(t,e),t},H._setScheduler=function(e){s=e},H._setAsap=function(e){a=e},H._asap=a,H.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=H},H.Promise=H,H},e.exports=i()}).call(this,n(9),n(8))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t){this.domain=t||e.defaultDomain,this.endpoint="https://"+this.domain+"/"+e.apiVersion}return e.prototype.get=function(t,n){var i=this;return new Promise(function(o,r){i.domain!==e.defaultDomain&&(n.domain=i.domain);var s="";Object.keys(n).length>0&&(s="?"+Object.keys(n).map(function(e){return e+"="+encodeURIComponent(n[e])}).join("&"));var a=i.endpoint+t+s,u=new XMLHttpRequest;u.open("GET",a,!0),u.withCredentials=!0,u.onload=function(){u.status>=200&&u.status<300?o(JSON.parse(u.response)):r(u.statusText)},u.onerror=function(){return r(u.statusText)},u.send(null)})},e.defaultDomain="api.mediego.com",e.apiVersion="1.0",e}();t.API=i},function(e,t){e.exports="<style>.mediego-popup{display:block;z-index:1000;background-color:transparent;border-radius:5px}.mediego-popup-close-container{position:relative;float:right}.mediego-popup-close{background-color:transparent;border:none;font-size:large;font-weight:700;color:#000}.mediego-popup-content{padding:20px}.mediego-popup-center{position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.mediego-popup-top-center{position:fixed;top:0;left:50%;-webkit-transform:translate(-50%,0);-ms-transform:translate(-50%,0);transform:translate(-50%,0)}.mediego-popup-bottom-right{position:fixed;bottom:0;right:0}.mediego-popup-bottom-center{position:fixed;bottom:0;left:50%;-webkit-transform:translate(-50%,0);-ms-transform:translate(-50%,0);transform:translate(-50%,0)}.mediego-fade-in{animation:fadeIn .5s}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.mediego-slide-top{animation:slideTop .5s}@keyframes slideTop{from{margin-top:-100%}to{margin-top:0}}</style> <div class=mediego-popup> <div class=mediego-popup-close-container> <button class=mediego-popup-close>X</button> </div> <div class=mediego-popup-content> </div> </div>"},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var popupContainerHtml=__webpack_require__(2),Popup=function(){function e(e,t,n,i,o,r){var s=this;this.onCloseCallbacks=[],this.template=e,this.delay=i,this.actionId=o,this.displayId=r,this.popupContainer=document.createElement("div"),this.popupContainer.innerHTML=popupContainerHtml,this.popupCloseButton=this.popupContainer.querySelector(".mediego-popup-close"),this.popupCloseButton.onclick=function(e){s.close()},this.popupContent=this.popupContainer.querySelector(".mediego-popup-content"),this.popupContent.innerHTML=this.template;var a,u,c=this.popupContainer.querySelector(".mediego-popup");switch(c.setAttribute("actionid",this.actionId),c.setAttribute("displayid",this.displayId),t){case"TopCenter":a="mediego-popup-top-center";break;case"Center":a="mediego-popup-center";break;case"BottomRight":a="mediego-popup-bottom-right";break;case"BottomCenter":a="mediego-popup-bottom-center";break;default:a="mediego-popup-top-center"}switch(c.classList.add(a),n){case"FadeIn":u="mediego-fade-in";break;case"SlideTop":u="mediego-slide-top"}u&&c.classList.add(u)}return e.prototype.display=function(){var e=this;setTimeout(function(){document.body.appendChild(e.popupContainer);for(var t=e.popupContent.querySelectorAll("script"),n=0;n<t.length;n++){buildClientFunction(t.item(n).text,e)()}},this.delay)},e.prototype.close=function(){document.body.contains(this.popupContainer)&&document.body.removeChild(this.popupContainer);for(var e=0,t=this.onCloseCallbacks;e<t.length;e++){(0,t[e])()}},e.prototype.onClose=function(e){this.onCloseCallbacks.push(e)},e}();function buildClientFunction(clientCode,concretePopup){return function(){var popup={onClose:function(e){concretePopup.onClose(e)},close:function(){concretePopup.close()},actionId:concretePopup.actionId,displayId:concretePopup.displayId};eval(clientCode)}}exports.Popup=Popup},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=function(){function e(e){this.api=e}return e.prototype.main=function(t,n){var o={};o.muid=n.muid,null!=o.euid&&(o.euid=t.euid),o.timestamp=n.timestamp,o.executedActions="[]";try{var r=localStorage.getItem(e.localStorageKey);null!==r&&(o.executedActions=r)}catch(e){}var s=this.api.get("/segmentation/segment",o);return s.then(function(t){for(var n=0,o=t.actions;n<o.length;n++){var r=o[n],s=r.parameters;switch(r.type){case"popup-action":new i.Popup(s.template,s.position,s.animation,s.delay_ms,r.actionId,r.displayId).display()}}try{localStorage.setItem(e.localStorageKey,JSON.stringify(t.executedActions))}catch(e){}}),s},e.localStorageKey="mediego:executed_actions",e}();t.Segmentation=o},function(module,exports,__webpack_require__){"use strict";var mediego;Object.defineProperty(exports,"__esModule",{value:!0}),void 0!==mediego&&void 0!==mediego.display||(mediego=mediego||{});var Display=function(){function Display(e){this.engines={},this.data={},this.tested=0,this.done=0,this.unavailable=[],this.api=e}return Display.prototype.log=function(e){},Display.prototype.parse=function(e,t,n){for(var i,o,r,s=e.getAttribute("class").split(/\s+/),a="default",u="default",c=0;c<s.length;++c){if(0==s[c].indexOf("mediego.id")&&(a=(a=s[c].split(".")[2]).toString()),0==s[c].indexOf("mediego.source")&&(u=(u=s[c].split(".")[2]).toString()),0==s[c].indexOf("mediego.item")){var l=s[c].split(".");i=l[1],o=l.slice(2,l.length).join(".")}0===s[c].indexOf("mediego.count")&&(r=parseInt(s[c].split(".")[2]))}this.log("Parse "+a+" "+i+" "+o+" "),void 0===r&&(void 0===o||void 0!==n&&n!==a)||t(a,u,i,o,e,r)},Display.prototype.eval=function(eid,source,item,path,node){var content,engine=this.engines[eid][source];if(void 0!==engine){var pos=engine.indexOf(item),rec=this.data[eid].items[pos];void 0!==rec&&(this.log("Eval "+path+" "+JSON.stringify(rec)),"mediego_cdn"===path?eval("content = rec['metadata']['image']"):eval("content = rec."+path),node&&"IMG"==node.nodeName&&mediego.img_src_replace&&"function"==typeof mediego.img_src_replace&&(content=mediego.img_src_replace(content)))}return content},Display.prototype.isOptional=function(e){for(var t=!1,n=e.getAttribute("class").split(/\s+/),i=0;i<n.length;++i)0==n[i].indexOf("mediego.optional")&&(t=!0);return t},Display.prototype.defined=function(e,t,n,i,o){var r=this.eval(e,t,n,i,o);this.log("Defined "+e+" "+n+" "+i),this.isOptional(o)||void 0!==r&&null!=r||this.unavailable.push(n),this.tested=this.tested+1},Display.prototype.insert=function(e,t,n,i,o){var r=this.eval(e,t,n,i,o);if(this.log(" insert "+r+" "+i),void 0===r||this.unavailable.indexOf(n)>=0){if(!this.isOptional(o))return;o.style.display="none"}switch(o.nodeName){case"IMG":var s=parseInt(window.mediego_image_width),a=parseInt(window.mediego_image_height);if(!isNaN(s)&&!isNaN(a)){var u=this.eval(e,t,n,"image_hash"),c=this.eval(e,t,n,"mediego_cdn");u&&(r="https://cdn.mediego.com/crop"+s+"x"+a+"/"+u+"/"+c)}o.setAttribute("src",r);break;case"A":o.setAttribute("href",r),o.setAttribute("target",this.data[e].headers.target);var l=this.data[e].headers.gaq_push;if(null!=l&&l.length){for(var p="",d=0;d<l.length;d++)p+="_gaq.push(["+l[d]+"]);";o.setAttribute("onclick",p)}break;default:o.innerHTML=r}},Display.prototype.fill=function(e,t,n,i,o,r){var s=this.engines[e];void 0===s&&(s=this.engines[e]={});var a=this.engines[e][t];void 0===a&&(a=this.engines[e][t]=[]),-1==a.indexOf(n)&&void 0!==n&&a.push(n),void 0!==r&&(a.length=r)},Display.prototype.getCookie=function(e){var t=("; "+document.cookie).split("; "+e+"=");return 2==t.length?t.pop().split(";").shift():null},Display.prototype.generateParameters=function(e,t,n,i,o,r){var s={};if(s.format=i,"default"!==t&&(s.engine=t),void 0!==this.referer&&null!=this.referer&&(s.referer=this.referer),"default"!==n?s.source="client_"+n:window.mediego_source&&(s.source="client_"+window.mediego_source),null!=o&&(s.muid=o),null!=r)s.euid=r;else{var a=window.mediego_euid||this.getCookie("mediego_euid")||null;null!=a&&(s.euid="function"==typeof a?a():a)}return s},Display.prototype.globals=function(e,t){"default"==e?this.abtest=t.headers.abtest:(this.abtest=this.abtest||{},this.abtest[e]=t.headers.abtest)},Display.prototype.request=function(e,t,n,i,o,r){var s=this,a=this.generateParameters(n,e,t,i,o,r);this.api.get("/recommendations/json",a).then(function(n){if("prestashop"===i){for(var o=[],r=0;r<n.items.length;r++){var a=n.items[r];o.push({id:a.id,ruuid:a.ruuid})}$.ajax({type:"POST",url:n.display.api_address,data:{display:$("#ukoomediego_block_products").data("display"),products_ruuid:o},dataType:"text",error:function(e,t,i){window[n.display.callback_error](e,t,i)},success:function(e){window[n.display.callback_success](e)}})}else{s.data[e]=n,s.globals(e,n);for(var u=0;u<s.tags.length;++u)s.parse(s.tags[u],s.defined.bind(s),e);var c=setInterval(function(){if(s.tested==s.tags.length){clearInterval(c);for(var n=0;n<s.tags.length;++n)s.parse(s.tags[n],s.insert.bind(s),e);if("dummy"==s.data[e].headers.abtest)var i=1,o=setInterval(function(){((function(){var n=document.querySelector(s.data[e].headers.default_element_path);if(null!==n){for(var i=s.eval(e,t,"itemA","link",null),o=/mediego_ruuid=([^&]+)/.exec(i)[1],r=n.getElementsByTagName("a"),a=0;a<r.length;a++)r[a].href+=r[a].href.indexOf("?")<0?"?":"&",r[a].href+="mediego_ruuid="+o;return n.style.display="",!0}return!1})()||i>=10)&&clearInterval(o),i++},100);else s.style("");"function"==typeof mediego.postprocess&&mediego.postprocess()}},100)}})},Display.prototype.style=function(e){for(var t=document.getElementsByClassName("mediego_content"),n=0;n<t.length;++n)t[n].style.display=e},Display.prototype.main=function(e,t,n){this.style("none"),this.tags=document.getElementsByClassName("mediego");for(var i=0;i<this.tags.length;++i)this.parse(this.tags[i],this.fill.bind(this));this.engines_ids=Object.keys(this.engines);for(i=0;i<this.engines_ids.length;++i){var o=this.engines_ids[i];this.sources=Object.keys(this.engines[o]);for(var r=0;r<this.sources.length;++r){var s=this.sources[r],a=this.engines[o][s].length;this.request(o,s,a,e,t,n)}}},Display}();exports.Display=Display},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.api=e}return e.prototype.main=function(){return this.trackVisit()},e.prototype.trackVisit=function(){var t={};try{var n=localStorage.getItem(e.localStorageMuidKey);null!=n&&(t.muid=n)}catch(e){}var i=window.mediego_euid||this.getCookie("mediego_euid")||null;null!=i&&(t.euid="function"==typeof i?i():i),t.referrer=document.URL,document.referrer&&document.referrer.length>0&&(t.origin=document.referrer);var o=this.api.get("/track/visit",t);return o.then(function(t){try{localStorage.setItem(e.localStorageMuidKey,t.muid)}catch(e){}}),o.then(function(e){return[t,e]})},e.prototype.getCookie=function(e){var t=("; "+document.cookie).split("; "+e+"=");return 2==t.length?t.pop().split(";").shift():null},e.localStorageMuidKey="mediego:uid",e}();t.Tracking=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=n(5),r=n(0),s=n(4),a=n(1);"undefined"==typeof Promise&&r.polyfill();var u=window;u.mediego_agent_executed=u.mediego_agent_executed||!1;var c=!1;window.setTimeout(function(){if(!u.mediego_agent_executed){u.mediego_agent_executed=!0;var e=new a.API(u.mediego_domain);new i.Tracking(e).main().then(function(t){var n=t[0],i=t[1];function r(){new o.Display(e).main(i.display_type,n.muid,n.euid)}i.requires_segmentation&&new s.Segmentation(e).main(n,i),"complete"===document.readyState||"loaded"===document.readyState?r():document.onreadystatechange=function(){c||"loaded"!==document.readyState&&"interactive"!==document.readyState&&"complete"!==document.readyState||(r(),c=!0)}})}},0)},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n,i,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var u,c=[],l=!1,p=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):p=-1,c.length&&f())}function f(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++p<t;)u&&u[p].run();p=-1,t=c.length}u=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){n(0),e.exports=n(7)}]);